/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var image = ee.Image("users/images/Yukon_2014_v1"),
    image2 = ee.Image("users/images/NWForest_2014_v1"),
    image3 = ee.Image("users/images/CanPrairies_2014_v1"),
    image4 = ee.Image("users/images/MidEasternForest_2014_v1"),
    image5 = ee.Image("users/images/NovaScotia_2014_v1"),
    mosaic_2010 = ee.Image("users/images/Canada_2010_v3_cleaned"),
    cut1 = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.59613033800758, 53.45274265519486],
                  [-112.62119292921858, 53.43842916360781],
                  [-112.6297760083441, 53.41879138915246],
                  [-112.62943268516665, 53.415722167332476],
                  [-112.62745857695455, 53.415671011761],
                  [-112.62728690098447, 53.40825280160069],
                  [-112.6414489959929, 53.40815047300847],
                  [-112.62977600825718, 53.392593575519335],
                  [-112.58995052086743, 53.37723579770135],
                  [-112.54909506402839, 53.37764541035123],
                  [-112.52025591802607, 53.376211748865686],
                  [-112.50789628402532, 53.37600693613577],
                  [-112.4955366499633, 53.399758642760204],
                  [-112.48489363173184, 53.417154498422484],
                  [-112.45399454658536, 53.43720206844603],
                  [-112.43923165035721, 53.441292247680536],
                  [-112.43648506493855, 53.456218060949475],
                  [-112.46017436343601, 53.47747317561586],
                  [-112.48111707660121, 53.50749831165167],
                  [-112.49416335697964, 53.51933911614428],
                  [-112.52574908851471, 53.519339116166016],
                  [-112.55218497251701, 53.517706098464],
                  [-112.56626122243904, 53.51729783420107],
                  [-112.57475951192714, 53.511760224849944],
                  [-112.58171076502231, 53.50586483761792],
                  [-112.58686061252365, 53.486053955178505],
                  [-112.59407039904329, 53.477064523833874],
                  [-112.60437009408759, 53.4760428770124],
                  [-112.60025021605003, 53.46664257215164]]]),
            {
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.88572311401367, 53.61257142209236],
                  [-112.89825439453125, 53.6021827922948],
                  [-112.89791107177734, 53.593217999259544],
                  [-112.89430618286133, 53.583028425126976],
                  [-112.8980827331543, 53.572530595115346],
                  [-112.89344787597656, 53.56294777605132],
                  [-112.87782669067383, 53.564884903931485],
                  [-112.87181854248047, 53.57976724250279],
                  [-112.8683853149414, 53.58863299493418],
                  [-112.86340713500977, 53.601469753401375],
                  [-112.86117553710938, 53.61104384269007],
                  [-112.86392211914062, 53.61430261193972],
                  [-112.87954330444336, 53.61542275578082]]]),
            {
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-112.97876358032227, 53.61776477868735],
                  [-112.96932220458984, 53.61318243837915],
                  [-112.95661926269531, 53.61297876726604],
                  [-112.94992446899414, 53.61684835041466],
                  [-112.95095443725586, 53.622041180918934],
                  [-112.9610824584961, 53.622142994739306],
                  [-112.96880722045898, 53.621430292839094]]]),
            {
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.00914764404297, 53.47313092901867],
                  [-113.0097484588623, 53.47001454423698],
                  [-113.00434112548828, 53.46510960636756],
                  [-113.00116539001465, 53.46235032973422],
                  [-112.9969596862793, 53.45882432637673],
                  [-112.99412727355957, 53.45621796177357],
                  [-112.99687385559082, 53.45473583996399],
                  [-112.99627304077148, 53.45126031700095],
                  [-112.99086570739746, 53.44594426113318],
                  [-112.99223899841309, 53.43827570099845],
                  [-112.98811912536621, 53.43157735951814],
                  [-112.97412872314453, 53.432906885316555],
                  [-112.96194076538086, 53.44083204150361],
                  [-112.94709205627441, 53.44834679185467],
                  [-112.94142723083496, 53.45488916530864],
                  [-112.93481826782227, 53.45555356873855],
                  [-112.92675018310547, 53.45524692229335],
                  [-112.94164180755615, 53.4611239269965],
                  [-112.95288562774658, 53.46495631792625],
                  [-112.96709060668945, 53.467613239222935],
                  [-112.97245502471924, 53.46633589397163],
                  [-112.97614574432373, 53.46487967349799],
                  [-112.98472881317139, 53.46715339936052],
                  [-112.9958438873291, 53.472671148933145],
                  [-113.0059289932251, 53.47394830353804]]]),
            {
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.05553913116455, 53.356237895478195],
                  [-113.05274963378906, 53.35155036660308],
                  [-113.03940296173096, 53.34611936073618],
                  [-113.01481246948242, 53.348809332195515],
                  [-113.00562858581543, 53.35249815992116],
                  [-112.99386978149414, 53.34911674669819],
                  [-112.98702487844031, 53.35033993758061],
                  [-112.99138062312863, 53.36365227013993],
                  [-113.00824642181396, 53.36043830302833],
                  [-113.0178165435791, 53.354701057567226],
                  [-113.02283763885498, 53.35572562233186],
                  [-113.02777290344238, 53.35692945445876],
                  [-113.0331802368164, 53.3606688012155],
                  [-113.03828716278076, 53.36376760022682],
                  [-113.04150581359863, 53.36561140674406],
                  [-113.04532527923584, 53.36550897514192],
                  [-113.048415184021, 53.36550897514192],
                  [-113.04961681365967, 53.365201678857986],
                  [-113.04935932159424, 53.363613946082026],
                  [-113.05051803588867, 53.36205176415606],
                  [-113.05232048034668, 53.360540746820995],
                  [-113.0542516708374, 53.35877355687945],
                  [-113.05678367614746, 53.35698068060352]]]),
            {
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.07008743286133, 53.04513483308966],
                  [-113.07798385620117, 53.03120053194822],
                  [-113.06991577148438, 53.018707442152426],
                  [-113.0709457397461, 53.013027568815374],
                  [-113.06425094604492, 53.01209806381578],
                  [-113.04914474487305, 53.01922375720149],
                  [-113.03438186645508, 53.017364994108725],
                  [-113.0215072631836, 53.02356055968551],
                  [-113.02082061767578, 53.03543290697411],
                  [-113.03386688232422, 53.046682810795595],
                  [-113.05326461791992, 53.056279031790105],
                  [-113.07317733764648, 53.06009628898157],
                  [-113.0874252319336, 53.05792977910662]]]),
            {
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-113.18982124328613, 53.16658495566282],
                  [-113.18535804748535, 53.17183301220704],
                  [-113.17256927490234, 53.17440535451809],
                  [-113.17119598388672, 53.18263581355924],
                  [-113.17222595214844, 53.20675224873498],
                  [-113.20844650268555, 53.20706068667339],
                  [-113.20844650268555, 53.192664550500204],
                  [-113.22097778320312, 53.19194461676538],
                  [-113.22612762451172, 53.18999044997583],
                  [-113.22750091552734, 53.18145278225795],
                  [-113.21102142333984, 53.174765470134616],
                  [-113.2027816772461, 53.17229604520484],
                  [-113.19840431213379, 53.171009830095095],
                  [-113.19522857666016, 53.16972357642841]]]),
            {
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-97.9815673828125, 52.771200932880234],
                  [-97.91290283203125, 52.46103016351593],
                  [-97.62725830078125, 52.20928975234919],
                  [-97.06146240234375, 52.17056279155013],
                  [-96.470947265625, 52.338695481504814],
                  [-96.55059814453125, 52.64306343665892],
                  [-97.261962890625, 52.79279742036008],
                  [-97.4761962890625, 52.986683840958655],
                  [-97.9046630859375, 52.9602206338811]]]),
            {
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-100.29281616210938, 52.13095909247831],
                  [-100.30929565429688, 52.094062282906954],
                  [-100.24818420410156, 52.06156782779578],
                  [-100.16475677490234, 52.065156039527885],
                  [-100.14381408691406, 52.112830761862746],
                  [-100.1235580444336, 52.15287187547032],
                  [-100.13557434082031, 52.17498442181847]]]),
            {
              "system:index": "8"
            })]),
    canada = /* color: #98ff00 */ee.Geometry.Polygon(
        [[[-136.40625, 58.401711667608],
          [-135.966796875, 55.47885346331033],
          [-134.033203125, 51.72702815704774],
          [-129.287109375, 49.32512199104001],
          [-124.62890625, 47.694974341862824],
          [-118.828125, 48.2246726495652],
          [-108.6328125, 47.87214396888731],
          [-97.646484375, 47.87214396888731],
          [-92.8125, 47.10004469402522],
          [-89.208984375, 47.39834920035926],
          [-86.30859375, 46.55886030311717],
          [-85.078125, 43.96119063892024],
          [-82.96875, 40.780541431860335],
          [-79.365234375, 41.31082388091817],
          [-76.376953125, 42.94033923363181],
          [-71.54296875, 43.3890819391175],
          [-68.37890625, 44.90257799628887],
          [-67.5, 42.423456517938305],
          [-58.798828125, 43.13306116240612],
          [-50.44921875, 45.9511496866914],
          [-50.537109375, 49.03786794532644],
          [-56.337890625, 52.802761415419674],
          [-61.611328125, 52.64306343665892],
          [-66.533203125, 53.17311920264064],
          [-73.740234375, 53.27835301753182],
          [-80.5078125, 52.42922227795514],
          [-87.1875, 53.64463782485651],
          [-91.93359375, 52.64306343665892],
          [-93.603515625, 53.4357192066942],
          [-99.580078125, 54.7246201949245],
          [-106.171875, 55.32914440840507],
          [-111.181640625, 57.89149735271034],
          [-114.609375, 60.586967342258696],
          [-122.783203125, 60.45721779774395],
          [-137.98828125, 60.973107109199404]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
var mosaic_2014=ee.ImageCollection([image,image2,image3,image4,image5])
.qualityMosaic('classification')

//Map.addLayer(mosaic_2010,{palette:'00ff00'},'map_2010')
//Map.addLayer(mosaic_2014,{palette:'ffff00'},'map_2014')

mosaic_2014=mosaic_2014.unmask().int16()
mosaic_2010=mosaic_2010.unmask().int16()

//Map.addLayer(mosaic_2010,{palette:'0000ff,00ff00'},'map_2010')
//Map.addLayer(mosaic_2014,{palette:'0000ff,ffff00'},'map_2014')

var out_img=mosaic_2010.subtract(mosaic_2014).add(1).byte()
.updateMask(mosaic_2010.eq(1).or(mosaic_2014.eq(1)))

function applyMask(featureCollection,studyArea,inputImage){
  var maskImage=ee.Image(1).byte().clip(featureCollection)
  .unmask().subtract(1).abs()
  return inputImage.updateMask(maskImage.eq(1))
}

out_img=applyMask(cut1,canada,out_img)

Map.addLayer(out_img, {min:0,max:2,palette:'00ff00,ffff00,ff0000'})

out_img=out_img.gt(0)

Map.addLayer(out_img,{palette:'00ff00'},'out_img')


Export.image.toAsset({
  image: out_img,
  scale: 30,
  maxPixels:9999999990000,
  description: 'Canada_vf1_asset',
  assetId: 'Canada_vf1_asset',
  region: canada, 
});


Export.image.toDrive({
  image: out_img,
  scale: 30,
  maxPixels:9999999990000,
  folder: 'data',
  description: 'Canada_vf1_drive',
  fileNamePrefix: 'Canada_vf1_2014_v1',
  region: canada, 
});
